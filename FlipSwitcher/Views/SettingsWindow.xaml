<Window x:Class="FlipSwitcher.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="{DynamicResource SettingsWindowTitle}"
    Height="480"
    Width="500"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent"
    WindowStartupLocation="CenterScreen"
    ResizeMode="NoResize"
    PreviewKeyDown="Window_PreviewKeyDown">

    <!-- Main Container -->
    <Border Background="{StaticResource BackgroundSolidBaseBrush}"
        BorderBrush="{StaticResource SurfaceStrokeBrush}"
        BorderThickness="1"
        CornerRadius="12"
        Margin="16">

        <Border.Effect>
            <DropShadowEffect BlurRadius="32"
                ShadowDepth="8"
                Direction="270"
                Color="#000000"
                Opacity="0.5" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header (draggable) -->
            <Border Grid.Row="0"
                Background="{StaticResource BackgroundSolidSecondaryBrush}"
                CornerRadius="12,12,12,12"
                Padding="20,16"
                MouseLeftButtonDown="Header_MouseLeftButtonDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <!-- Settings Icon -->
                        <Border Width="32" Height="32"
                            Background="{StaticResource AccentGradientBrush}"
                            CornerRadius="8"
                            Margin="0,0,12,0">
                            <Path
                                Data="M12 8C9.79 8 8 9.79 8 12C8 14.21 9.79 16 12 16C14.21 16 16 14.21 16 12C16 9.79 14.21 8 12 8ZM19.94 11C19.48 7.01 16.27 3.8 12.28 3.34V1H11.72V3.34C7.73 3.8 4.52 7.01 4.06 11H1V12H4.06C4.52 15.99 7.73 19.2 11.72 19.66V23H12.28V19.66C16.27 19.2 19.48 15.99 19.94 12H23V11H19.94ZM12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C15.31 6 18 8.69 18 12C18 15.31 15.31 18 12 18Z"
                                Fill="White"
                                Stretch="Uniform"
                                Width="16" Height="16"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                        </Border>
                        <TextBlock Text="{DynamicResource Settings}"
                            Style="{StaticResource TitleTextStyle}"
                            VerticalAlignment="Center" />
                    </StackPanel>

                    <!-- Close Button -->
                    <Button Grid.Column="1"
                        Click="CloseButton_Click"
                        Style="{StaticResource FluentCloseButtonStyle}" />
                </Grid>
            </Border>

            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1"
                Background="{StaticResource BackgroundSolidBaseBrush}"
                VerticalScrollBarVisibility="Auto"
                Padding="20,16,20,20"
                Style="{StaticResource FluentScrollViewerStyle}">
                <StackPanel>

                    <!-- Language Section -->
                    <TextBlock Text="{DynamicResource SettingsLanguage}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="{DynamicResource SettingsLanguage}"
                                    Style="{StaticResource BodyStrongTextStyle}" />
                                <TextBlock Text="{DynamicResource SettingsLanguageDesc}"
                                    Style="{StaticResource CaptionTextStyle}"
                                    Margin="0,4,0,0" />
                            </StackPanel>

                            <ComboBox x:Name="LanguageComboBox"
                                Grid.Column="1"
                                Width="120"
                                SelectedIndex="0"
                                SelectionChanged="LanguageComboBox_SelectionChanged"
                                Style="{StaticResource FluentComboBoxStyle}"
                                ItemContainerStyle="{StaticResource FluentComboBoxItemStyle}">
                                <ComboBoxItem Content="{DynamicResource LanguageEnglish}" Tag="0" />
                                <ComboBoxItem Content="{DynamicResource LanguageChinese}" Tag="1" />
                                <ComboBoxItem Content="{DynamicResource LanguageChineseTraditional}"
                                    Tag="2" />
                            </ComboBox>
                        </Grid>
                    </Border>

                    <!-- Hotkey Section -->
                    <TextBlock Text="{DynamicResource SettingsHotkey}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,24">
                        <StackPanel>
                            <!-- Alt + Space Option -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsAltSpace}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsAltSpaceDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="AltSpaceCheckBox"
                                    Grid.Column="1"
                                    IsChecked="True"
                                    Checked="HotkeyCheckBox_Changed"
                                    Unchecked="HotkeyCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <!-- Alt + Tab Option -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{DynamicResource SettingsAltTab}"
                                            Style="{StaticResource BodyStrongTextStyle}" />
                                        <Border Background="{StaticResource AccentDefaultBrush}"
                                            CornerRadius="4"
                                            Padding="6,2"
                                            Margin="8,0,0,0"
                                            VerticalAlignment="Center">
                                            <TextBlock
                                                Text="{DynamicResource SettingsReplacesSystem}"
                                                Style="{StaticResource CaptionTextStyle}"
                                                FontSize="10"
                                                Foreground="{StaticResource TextOnAccentBrush}" />
                                        </Border>
                                    </StackPanel>
                                    <TextBlock Text="{DynamicResource SettingsAltTabDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="AltTabCheckBox"
                                    Grid.Column="1"
                                    IsChecked="False"
                                    Checked="HotkeyCheckBox_Changed"
                                    Unchecked="HotkeyCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <!-- Current Hotkey Display -->
                            <Border Background="{StaticResource ControlDefaultBrush}"
                                CornerRadius="6"
                                Padding="12,8"
                                Margin="0,16,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{DynamicResource SettingsActiveHotkey}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Foreground="{StaticResource TextSecondaryBrush}"
                                        VerticalAlignment="Center"
                                        Margin="0,0,8,0" />
                                    <TextBlock x:Name="CurrentHotkeyText"
                                        Text="Alt + Space"
                                        Style="{StaticResource BodyStrongTextStyle}"
                                        Foreground="{StaticResource AccentDefaultBrush}"
                                        VerticalAlignment="Center" />
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Appearance Section -->
                    <TextBlock Text="{DynamicResource SettingsAppearance}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,24">
                        <StackPanel>
                            <!-- Theme Option -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{DynamicResource SettingsTheme}"
                                            Style="{StaticResource BodyStrongTextStyle}" />
                                        <Border Background="{StaticResource AccentDefaultBrush}"
                                            CornerRadius="4"
                                            Padding="6,2"
                                            Margin="8,0,0,0"
                                            VerticalAlignment="Center">
                                            <TextBlock Text="{DynamicResource SettingsThemeRestartHint}"
                                                Style="{StaticResource CaptionTextStyle}"
                                                FontSize="10"
                                                Foreground="{StaticResource TextOnAccentBrush}" />
                                        </Border>
                                    </StackPanel>
                                    <TextBlock Text="{DynamicResource SettingsThemeDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <ComboBox x:Name="ThemeComboBox"
                                    Grid.Column="1"
                                    Width="120"
                                    SelectedIndex="0"
                                    SelectionChanged="ThemeComboBox_SelectionChanged"
                                    Style="{StaticResource FluentComboBoxStyle}"
                                    ItemContainerStyle="{StaticResource FluentComboBoxItemStyle}">
                                    <ComboBoxItem Content="{DynamicResource ThemeDark}" />
                                    <ComboBoxItem Content="{DynamicResource ThemeLight}" />
                                </ComboBox>
                            </Grid>

                            <!-- Font Family Option -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsFont}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsFontDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <ComboBox x:Name="FontFamilyComboBox"
                                    Grid.Column="1"
                                    Width="200"
                                    SelectionChanged="FontFamilyComboBox_SelectionChanged"
                                    Style="{StaticResource FluentComboBoxStyle}"
                                    ItemContainerStyle="{StaticResource FluentComboBoxItemStyle}" />
                            </Grid>

                            <!-- Mica Effect Option -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsMicaEffect}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsMicaEffectDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="MicaEffectCheckBox"
                                    Grid.Column="1"
                                    IsChecked="True"
                                    Checked="MicaEffectCheckBox_Changed"
                                    Unchecked="MicaEffectCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Behavior Section -->
                    <TextBlock Text="{DynamicResource SettingsBehavior}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,24">
                        <StackPanel>
                            <!-- Run as Administrator -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{DynamicResource SettingsRunAsAdmin}"
                                            Style="{StaticResource BodyStrongTextStyle}" />
                                        <Border x:Name="AdminStatusBadge"
                                            CornerRadius="4"
                                            Padding="6,2"
                                            Margin="8,0,0,0"
                                            VerticalAlignment="Center">
                                            <TextBlock x:Name="AdminStatusText"
                                                Style="{StaticResource CaptionTextStyle}"
                                                FontSize="10" />
                                        </Border>
                                    </StackPanel>
                                    <TextBlock
                                        Text="{DynamicResource SettingsRunAsAdminDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="RunAsAdminCheckBox"
                                    Grid.Column="1"
                                    IsChecked="False"
                                    Checked="RunAsAdminCheckBox_Changed"
                                    Unchecked="RunAsAdminCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <!-- Start with Windows -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsStartWithWindows}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsStartWithWindowsDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="StartWithWindowsCheckBox"
                                    Grid.Column="1"
                                    IsChecked="False"
                                    Checked="StartWithWindowsCheckBox_Changed"
                                    Unchecked="StartWithWindowsCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <!-- Hide on Focus Lost -->
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsHideOnFocusLost}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsHideOnFocusLostDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="HideOnFocusLostCheckBox"
                                    Grid.Column="1"
                                    IsChecked="True"
                                    Checked="HideOnFocusLostCheckBox_Changed"
                                    Unchecked="HideOnFocusLostCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <!-- Pinyin Search -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsPinyinSearch}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock Text="{DynamicResource SettingsPinyinSearchDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="PinyinSearchCheckBox"
                                    Grid.Column="1"
                                    IsChecked="False"
                                    Checked="PinyinSearchCheckBox_Changed"
                                    Unchecked="PinyinSearchCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Updates Section -->
                    <TextBlock Text="{DynamicResource SettingsUpdates}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16"
                        Margin="0,0,0,24">
                        <StackPanel>
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{DynamicResource SettingsCheckForUpdatesAuto}"
                                        Style="{StaticResource BodyStrongTextStyle}" />
                                    <TextBlock
                                        Text="{DynamicResource SettingsCheckForUpdatesAutoDesc}"
                                        Style="{StaticResource CaptionTextStyle}"
                                        Margin="0,4,0,0" />
                                </StackPanel>

                                <CheckBox x:Name="CheckForUpdatesCheckBox"
                                    Grid.Column="1"
                                    IsChecked="False"
                                    Checked="CheckForUpdatesCheckBox_Changed"
                                    Unchecked="CheckForUpdatesCheckBox_Changed"
                                    Style="{StaticResource FluentCheckBoxStyle}" />
                            </Grid>

                            <Button x:Name="CheckForUpdatesButton"
                                Content="{DynamicResource SettingsCheckForUpdates}"
                                Click="CheckForUpdatesButton_Click"
                                Style="{StaticResource FluentButtonStyle}"
                                HorizontalAlignment="Left" />
                        </StackPanel>
                    </Border>

                    <!-- About Section -->
                    <TextBlock Text="{DynamicResource SettingsAbout}"
                        Style="{StaticResource SubtitleTextStyle}"
                        Margin="0,0,0,12" />

                    <Border Background="{StaticResource CardBackgroundBrush}"
                        BorderBrush="{StaticResource SurfaceStrokeDefaultBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="16">
                        <StackPanel>
                            <TextBlock x:Name="VersionText"
                                Style="{StaticResource BodyStrongTextStyle}" />
                            <TextBlock Text="{DynamicResource SettingsAboutDesc}"
                                Style="{StaticResource CaptionTextStyle}"
                                Margin="0,4,0,8" />
                            <TextBlock Style="{StaticResource CaptionTextStyle}"
                                Foreground="{StaticResource AccentDefaultBrush}">
                                <Hyperlink NavigateUri="https://github.com/dianbanjiu/FlipSwitcher"
                                    RequestNavigate="Hyperlink_RequestNavigate">
                                    <Run Text="{DynamicResource SettingsViewOnGitHub}" />
                                </Hyperlink>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>